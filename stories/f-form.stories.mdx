import { Meta, Preview, Story, Props } from '@storybook/addon-docs/blocks';
import fForm from '../src/component/f-form.vue'
import {Input} from 'element-ui'
import myLabel from './myLabel.vue'

<Meta title="f-form" />

# ä½¿ç”¨é…ç½®å®Œæˆè¡¨å•ç»„ä»¶çš„è°ƒç”¨

åŸæ¥çš„å†™æ³•

<Preview>
  <Story name="åŸæ¥çš„å†™æ³•">
  {
    {
      template: `
        <el-form @submit.native.prevent :model="ruleForm" :rules="rules" label-width="100px">
          <el-form-item label="æ´»åŠ¨åç§°" prop="name">
            <el-input v-model="ruleForm.name" clearable placeholder="è¾“å…¥æ´»åŠ¨åç§°"></el-input>
          </el-form-item>
        </el-form>
      `,
      data() {
        return {
          ruleForm: {
            name: '',
          },
          rules: {
            name: [
              { required: true, message: 'è¯·è¾“å…¥æ´»åŠ¨åç§°', trigger: 'blur' },
              { min: 3, max: 5, message: 'é•¿åº¦åœ¨ 3 åˆ° 5 ä¸ªå­—ç¬¦', trigger: 'blur' }
            ],
          }
        }
      }
    }
  }
  </Story>
</Preview>

ç—›ç‚¹ï¼šæ‰‹å†™æ¨¡ç‰ˆå†…å®¹ï¼Œel-form-itemå¯ä»¥ç”¨v-forï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦é‡å¤çš„å»å†™ä¸æ–¹ä¾¿ã€‚ruleå’Œform-itemåˆ†ç¦»

æ”¹ç‰ˆä¹‹åç”¨æ³•

<Preview>
  <Story name="æ”¹ç‰ˆä¹‹åå†™æ³•">
  {
    {
      template: `
        <f-form :forms="forms" :model.sync="model" label-width="100px" ></f-form>
      `,
      data() {
        return {
          model: {
          },
          forms: [
            {
              key: 'name',
              type: 'el-input',
              default: 'name',
              label: 'æ´»åŠ¨åç§°',
              extra: {
                placeholder: 'è¯·è¾“å…¥æ´»åŠ¨åç§°',
                clearable: true
              },
              rules: [
                { required: true, message: 'è¯·è¾“å…¥æ´»åŠ¨åç§°', trigger: 'blur' },
                { min: 3, max: 5, message: 'é•¿åº¦åœ¨ 3 åˆ° 5 ä¸ªå­—ç¬¦', trigger: 'blur' }
              ]
            }
          ]
        }
      }
    }
  }
  </Story>
</Preview>

ä¼˜ç‚¹ï¼šFormsæ”¯æŒel-formçš„æ‰€æœ‰å±æ€§ï¼›æ¯ä¸ªè¡¨å•é¡¹å’Œrulesåœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿æŸ¥çœ‹ï¼›å¯ä»¥æ·»åŠ é»˜è®¤å€¼ï¼›æ–¹ä¾¿çš„æ·»åŠ è¡¨å•ç»„ä»¶çš„å…¶ä»–å±æ€§ï¼Œå¦‚el-inputçš„placeholderï¼Œå†…éƒ¨å®ç°æ˜¯ä¼šæŠŠextraä½¿ç”¨v-bindåˆ°å¯¹åº”çš„è¡¨å•ç»„ä»¶ä¸Š

type æ”¯æŒç»„ä»¶ç±»å‹

## el-input è¾“å…¥æ¡†  el-switch å¼€å…³ç­‰ä¸€ç±»ç®€å•ç»„ä»¶
el-inputå¯åœ¨extraä¸­è®¾ç½®type="textarea"
æ›´å¤šextraå¯ç”¨å‚æ•°å¯è¯¦è§elementæ–‡æ¡£
## f-select é€‰æ‹©æ¡† f-radiobox f-checkbox f-cascader f-tags
å› ä¸ºé€‰æ‹©æ¡†æ˜¯è¦optionsçš„æ‰€ä»¥æ”¹å†™äº†el-selectï¼Œæ–°å¢optionså±æ€§
å¯ä»¥æ˜¯æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ï¼Œå¯ä»¥è¿”å›promise,æ„å‘³è¿™å¯ä»¥è¿œç¨‹è·å–é€‰é¡¹

<Preview>
  <Story name="æ”¯æŒç»„ä»¶ç±»å‹">
  {
    {
      template: `
        <f-form :forms="forms" :model.sync="model" label-width="140px" ></f-form>
      `,
      data() {
        const options = [{value: 0, label: '0'}, {value: 2, label: '2'}]
        return {
          model: {
          },
          forms: [
            {
              key: 'input',
              type: 'el-input',
              label: 'el-input',
              extra: {
                placeholder: 'input'
              }
            },
            {
              key: 'textarea',
              type: 'el-input',
              label: 'el-input',
              extra: {
                placeholder: 'textarea',
                type: 'textarea'
              }
            },
            {
              key: 'el-input-number',
              type: 'el-input-number',
              label: 'el-input-number',
              default: 123,
              extra: {
                placeholder: 'el-input-number'
              }
            },
            {
              key: 'el-date-picker',
              type: 'el-date-picker',
              label: 'el-date-picker'
            },
            {
              key: 'switch',
              type: 'el-switch',
              label: 'el-switch',
            },
            {
              key: 'file',
              type: 'f-file',
              label: 'f-file',
            },
            {
              key: 'f-tags',
              type: 'f-tags',
              default: 'a,b',
              label: 'f-tags',
            },
            {
              key: 'f-checkbox',
              type: 'f-checkbox',
              label: 'f-checkbox',
              extra: {
                options
              }
            },
            {
              key: 'f-radiobox',
              type: 'f-radiobox',
              label: 'f-radiobox',
              extra: {
                options
              }
            },
            {
              key: 'f-select',
              type: 'f-select',
              label: 'f-select',
              default: 0,
              extra: {
                options
              }
            },
            {
              key: 'f-cascader',
              type: 'f-cascader',
              label: 'f-cascader',
              extra: {
                options: options.map(item => {
                  return {
                    ...item,
                    children: options
                  }
                })
              }
            }
          ]
        }
      }
    }
  }
  </Story>
</Preview>

# åŠ¨æ€è¡¨å•é¡¹

formsæ”¯æŒå‡½æ•°

è‡ªå®šä¹‰ç»„ä»¶

<Preview>
  <Story name="åŠ¨æ€è¡¨å•é¡¹">
  {
    {
      template: `
        <f-form :forms="forms" :model.sync="model" label-width="140px" ></f-form>
      `,
      data() {
        const options = [{value: 1, label: '1'}, {value: 2, label: '2'}]
        return {
          model: {
          },
          forms: (model) => {
            return [{
              key: 'close',
              type: 'el-switch',
              label: 'æ˜¯å¦å…³é—­',
            },
            {
              key: 'data',
              type: 'el-input',
              label: 'å‚æ•°',
              hidden: 'model.close',
              extra: {
                placeholder: 'è¾“å…¥å‚æ•°'
              }
            }]
          }
        }
      }
    }
  }
  </Story>
</Preview>

# è”åŠ¨è¡¨å•é¡¹

å‡½æ•° select


<Preview>
  <Story name="è”åŠ¨è¡¨å•é¡¹">
  {
    {
      template: `
        <f-form :forms="forms" :model.sync="model" label-width="140px" ></f-form>
      `,
      data() {
        const options = [{value: 1, label: '1'}, {value: 2, label: '2'}]
        return {
          model: {
          },
          forms: [{
            key: 'province',
            type: 'f-select',
            label: 'çœ',
            extra: {
              options: [
                {
                  value: 'æ±Ÿè¥¿',
                  label: 'æ±Ÿè¥¿',
                },
                {
                  value: 'å¹¿ä¸œ',
                  label: 'å¹¿ä¸œ',
                }
              ]
            }
          },
          {
            key: 'City',
            type: 'f-select',
            label: 'å¸‚',
            extra: {
              options: (model) => {
                this.$message.success('å¸‚çº§é€‰é¡¹å·²æ›´æ–°');
                const all = [{
                  value: 'å‰å®‰',
                  label: 'å‰å®‰',
                  province: 'æ±Ÿè¥¿'
                }, {
                  value: 'å—æ˜Œ',
                  label: 'å—æ˜Œ',
                  province: 'æ±Ÿè¥¿'
                }, {
                  value: 'æ·±åœ³',
                  label: 'æ·±åœ³',
                  province: 'å¹¿ä¸œ'
                }, {
                  value: 'å¹¿å·',
                  label: 'å¹¿å·',
                  province: 'å¹¿ä¸œ'
                }]
                if (!model.province) {
                  return []
                }
                return all.filter(item => item.province === model.province)
              }
            }
          },
          {
            key: 'other',
            type: 'f-select',
            label: 'ä¸ç›¸å…³ï¼ˆæ°´æœï¼‰',
            extra: {
              options: [
                {
                  value: 'ğŸ‰',
                  label: 'ğŸ‰',
                },
                {
                  value: 'ğŸ‘',
                  label: 'ğŸ‘',
                }
              ]
            }
          }]
        }
      }
    }
  }
  </Story>
</Preview>


# labelComponent

labelComponent

<Preview>
  <Story name="labelä½¿ç”¨ç»„ä»¶">
  {
    {
      template: `
        <f-form :forms="forms" :model.sync="model" label-width="140px" ></f-form>
      `,
      data() {
        const options = [{value: 1, label: '1'}, {value: 2, label: '2'}]
        return {
          model: {
          },
          forms: [{
            key: 'province',
            type: 'f-select',
            label: 'çœ',
            labelComponent: myLabel,
            labelExtra: {
              onClose: () => {
                alert('onclose');
              }
            },
            extra: {
              options: [
                {
                  value: 'æ±Ÿè¥¿',
                  label: 'æ±Ÿè¥¿',
                },
                {
                  value: 'å¹¿ä¸œ',
                  label: 'å¹¿ä¸œ',
                }
              ]
            }
          },
          {
            key: 'City',
            type: 'f-select',
            label: 'å¸‚',
            labelComponent: myLabel,
            extra: {
              options: (model) => {
                this.$message.success('å¸‚çº§é€‰é¡¹å·²æ›´æ–°');
                const all = [{
                  value: 'å‰å®‰',
                  label: 'å‰å®‰',
                  province: 'æ±Ÿè¥¿'
                }, {
                  value: 'å—æ˜Œ',
                  label: 'å—æ˜Œ',
                  province: 'æ±Ÿè¥¿'
                }, {
                  value: 'æ·±åœ³',
                  label: 'æ·±åœ³',
                  province: 'å¹¿ä¸œ'
                }, {
                  value: 'å¹¿å·',
                  label: 'å¹¿å·',
                  province: 'å¹¿ä¸œ'
                }]
                if (!model.province) {
                  return []
                }
                return all.filter(item => item.province === model.province)
              }
            }
          }]
        }
      }
    }
  }
  </Story>
</Preview>

# è‡ªå®šä¹‰ç»„ä»¶

å½“ç»„ä»¶ä¸èƒ½å®Œå…¨æ»¡è¶³éœ€æ±‚çš„æ—¶å€™å¯ä»¥ï¼Œè‡ªå·±å¼€å‘ä¸€ä¸ªç»„ä»¶ã€‚æœ‰äº›äº§å“é‡Œçš„è¡¨å•é¡¹å¯èƒ½æ˜¯å¾ˆå¤æ‚çš„

ç†è®ºä¸Šåªè¦èƒ½æ”¯æŒv-modelçš„ç»„ä»¶éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªtypeä¼ å…¥ï¼Œ ä¸ºäº†æ›´å¥½ä½“éªŒï¼Œéœ€è¦å†æ”¯æŒreadonlyï¼Œ disableç­‰propsï¼Œè¿˜æœ‰é”®ç›˜æ“ä½œçš„

å†…éƒ¨ç”¨çš„åŠ¨æ€ç»„ä»¶(component)å®ç°ï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™å¯ä»¥å¼•å…¥ä½ çš„ç»„ä»¶ä¼ åˆ°type

è‡ªå®šä¹‰çš„æ—¶å€™å¯èƒ½ç”¨åˆ°çš„ä¸¤ä¸ªmixin

optionsMixinï¼Œ å¢åŠ optionsï¼Œloadingä¸¤ä¸ªpropsï¼Œæ–¹ä¾¿å¢åŠ optionså¯¹å‡½æ•°çš„æ”¯æŒ

arrayOrStringï¼Œæ–¹ä¾¿å¯¹valueä¸ºæ•°ç»„çš„è¡¨å•ç»„ä»¶ï¼Œå¢åŠ å¯¹å­—ç¬¦ä¸²çš„æ”¯æŒï¼Œ['a', 'b']ï¼Œ å¯ä»¥ç”¨'a,b'ï¼Œåˆ†éš”ç¬¦å¯è‡ªå®šä¹‰

<Preview>
  <Story name="è‡ªå®šä¹‰ç»„ä»¶">
  {
    {
      template: `
        <f-form :forms="forms" :model.sync="model" label-width="100px" ></f-form>
      `,
      data() {
        return {
          model: {
          },
          forms: [
            {
              key: 'name',
              type: Input, // import {Input} from 'element-ui'
              default: 'name',
              label: 'æ´»åŠ¨åç§°',
              extra: {
                placeholder: 'è¯·è¾“å…¥æ´»åŠ¨åç§°',
                clearable: true
              },
              rules: [
                { required: true, message: 'è¯·è¾“å…¥æ´»åŠ¨åç§°', trigger: 'blur' },
                { min: 3, max: 5, message: 'é•¿åº¦åœ¨ 3 åˆ° 5 ä¸ªå­—ç¬¦', trigger: 'blur' }
              ]
            }
          ]
        }
      }
    }
  }
  </Story>
</Preview>

å¦‚æœä½¿ç”¨çš„é¢‘ç‡è¾ƒé«˜ï¼Œå¯ä»¥ç”¨Vue.componentæŒ‚åœ¨å…¨å±€ä¸Šï¼Œtypeå°±å¯ä»¥ç›´æ¥ç”¨å­—ç¬¦ä¸²


# Props

<Props of={fForm} />